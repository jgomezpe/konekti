{"html":"<div id='路id路Modal'></div>\n<div id='路id路Editor' style='height:100%'></div>\n","js":"class EditorFMClient extends KonektiClient{\n\tconstructor( id, modal, url, user ){\n\t    super(id)\n\t\tthis.user = user\n\t\tthis.url = url\n\t\tthis.edit={}\n\tthis.modal=modal\n\t}\n\n\teditor(e){\n\t\tthis.edit[e.id] = e\n\t}\n\t\n\tannotation(id,anot){}\n\n\tcloseModal(){\n        Konekti.plugin.modal.close(this.modal)\n\t}\n\t\n\tfile(){\n\t\tKonekti.plugin.modal.cloudfilemanager(this.modal,this.id,this.url)\n\t}\n\t\n\tdelFile(file){\n\t\t// if( !file.endsWith('/') ) this.closeModal()\n\t}\n\t\n\treadFile(file){\n\t    this.closeModal()\n        Konekti.client[this.id+'Editor'].setText(Konekti.util.base64ToString(file))\n    }\n\t\n\tgetFile(file){                \n\t\treturn Konekti.util.stringToBase64(Konekti.client[this.id+'Editor'].getText())\n\t}\n    \n\tstoreFile(file){\n        this.closeModal()\n\t}\n}\n\nKonekti.plugin.editorfm.connect = function( dictionary ){\n\tvar id = dictionary.id\n\tvar client = id\n\tvar user = Konekti.client[dictionary.user].user\n\tdictionary.client = client\n\tvar modal\n\tif(typeof dictionary.modal === 'string' ) modal = dictionary.modal\n\telse{\n\t\tKonekti.plugin.modal.replaceWith(dictionary.modal)\n\t\tmodal = id+'Modal'\n\t}\n\n    new EditorFMClient(client, modal, dictionary.url, user)\n\n\tvar nav = dictionary.navbarid\n\tKonekti.plugin.navbar.replaceWith(\n\t\t{\n\t\t\t\"id\":nav,\n\t\t\t\"client\":client,\n\t\t\t\"color\":\"w3-blue-grey\",\n\t\t\t\"search\":false,\n\t\t\t\"btn\":[\t{\"id\":\"file\",\"tooltip\":\"File\", \"fa\":\"fa fa-file\"}]\n\t\t}\n\t)\n\n\tvar editor = id+'Editor'\n\tKonekti.plugin.ace.replaceWith(\n\t\t{ \n\t\t\t\"id\":editor,\n\t\t\t\"client\":client,\n\t\t\t\"theme\":\"chrome\", \n\t\t\t\"mode\":dictionary.mode\n\t\t}\n\t)\n}\n","copyright":"Copyright (c) 2019 by Jonatan Gomez-Perdomo. All rights reserved. See <A HREF='https://github.com/jgomezpe/konekti'>License</A>.","uses":["navbar","ace","modal"]}
