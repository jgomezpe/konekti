{"html":"<div id='·video·' style='width:100%; height:100%' ></div>\n","js":"// The youtube plugin\nKonekti.plugin.youtube.video = []\nKonekti.plugin.youtube.APILoaded = false\n\nKonekti.youtube = function(container_id, video_id, client){\n    var dict = {\"id\":container_id, \"video\":video_id}\n    if(client !== undefined ) dict.client=client\n    Konekti.plugin.youtube.replaceWith(dict)\n}\n\n//  Using the youtube api\nKonekti.core.loadScript(null,'https://www.youtube.com/iframe_api', null)\n\nwindow.onYouTubeIframeAPIReady = function(){\n\n    Konekti.plugin.youtube.APILoaded=true\n    while( Konekti.plugin.youtube.video.length > 0 ){\n        var dictionary = Konekti.plugin.youtube.video[0]\n        Konekti.plugin.youtube.video.shift()\n        Konekti.plugin.youtube.connect( dictionary )\n    }\n}\n\n// Youtube manager functions\nKonekti.plugin.youtube.connect = function( dictionary ){\n    if( Konekti.plugin.youtube.APILoaded ){\n        var id = dictionary.id\n\n        function onPlayerReady(event){\n            var video = event.target.playerInfo.videoData.video_id\n            var comp = document.getElementById(video)\n            var clientId = dictionary.client\n            if( clientId !== undefined ){\n                var client = Konekti.client(clientId)\n                client.pause(id, function(){ window[id].pauseVideo() } )\n                client.play(id, function(){ window[id].playVideo() })\n                client.seek(id, function(time){ window[id].seekTo(time,true) })\n            }\n        }\n\n        function onPlayerStateChange(event){\n            var video = event.target.playerInfo.videoData.video_id\n            var comp = document.getElementById(video)\n            var client = Konekti.client(dictionary.client)\n            if( client != null ){\n                if (event.data == YT.PlayerState.PLAYING) {\n                    function updatePlaying() {\n                        if (YT.PlayerState.PLAYING) {\n                            client.playing(id, event.target.playerInfo.currentTime)\n                            comp.setAttribute('timeout', setTimeout(updatePlaying,100))\n                        }\n                    }\n                    updatePlaying()\n                }else{\n                    clearTimeout(comp.getAttribute('timeout'))\n                    client.paused(id)\n                }\n            }\n        }\n        window[id] = new YT.Player(dictionary.video, {\n            videoId: dictionary.video,\n            playerVars: {rel: 0, fs:0, modestbranding:1},\n            events: {\n                'onReady': onPlayerReady,\n                'onStateChange': onPlayerStateChange\n            }\n        });\n    }else Konekti.plugin.youtube.video.push( dictionary )\n}","copyright":"Copyright (c) 2019 by Jonatan Gomez-Perdomo. All rights reserved. See <A HREF='https://github.com/jgomezpe/konekti'>License</A>."}
