{"html":"<div id='·id·' style='position:relative; width:100%; padding-bottom:·height·%; height:0'>\n <div id='·video·' style='position:absolute; width:100%; height:100%; top:0; left:0' ></div>\n</div>","js":"// The youtube plugin\nKonekti.plugin.youtube.video = []\nKonekti.plugin.youtube.APILoaded = false\n\n//  Using the youtube api\nKonekti.script.load(null,'https://www.youtube.com/iframe_api', null)\n\nwindow.onYouTubeIframeAPIReady = function(){\n Konekti.plugin.youtube.APILoaded=true\n while( Konekti.plugin.youtube.video.length > 0 ){\n  var dictionary = Konekti.plugin.youtube.video[0]\n  Konekti.plugin.youtube.video.shift()\n  Konekti.plugin.youtube.connect( dictionary )\n }\n}\n\n// Youtube manager functions\nKonekti.plugin.youtube.connect = function( dictionary ){\n if( Konekti.plugin.youtube.APILoaded ){\n  var id = dictionary.id\n\n  function onPlayerReady(event){\n   var video = event.target.playerInfo.videoData.video_id\n   var comp = document.getElementById(video)\n   var clientId = dictionary.client\n   if( clientId != null ){\n    var client = Konekti.client[clientId]\n    client.pause(id, function(){ window[id].pauseVideo() } )\n    client.play(id, function(){ window[id].playVideo() })\n    client.seek(id, function(time){ window[id].seekTo(time,true) })\n   }\n  }\n\n  function onPlayerStateChange(event){\n   var video = event.target.playerInfo.videoData.video_id\n   var comp = document.getElementById(video)\n   var client = Konekti.client[dictionary.client]\n   if( client != null ){\n    if (event.data == YT.PlayerState.PLAYING) {\n     function updatePlaying() {\n      if (YT.PlayerState.PLAYING) {\n       client.playing(id, event.target.playerInfo.currentTime)\n       comp.setAttribute('timeout', setTimeout(updatePlaying,100))\n      }\n     }\n     updatePlaying()\n    }else{\n     clearTimeout(comp.getAttribute('timeout'))\n     client.paused(id)\n    }\n   }\n  }\n  window[id] = new YT.Player(dictionary.video, {\n   videoId: dictionary.video,\n   playerVars: {rel: 0, fs:0, modestbranding:1},\n   events: {\n    'onReady': onPlayerReady,\n    'onStateChange': onPlayerStateChange\n   }\n  });\n }else Konekti.plugin.youtube.video.push( dictionary )\n}","copyright":"Copyright (c) 2019 by Jonatan Gomez-Perdomo. All rights reserved. See <A HREF='https://github.com/jgomezpe/konekti'>License</A>."}