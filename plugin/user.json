{"html":"<div id='·id·'>\n    <input id='·id·Id' placeholder='·user·' class='w3-block w3-input w3-left-align ·size·'>\n    <input id='·id·Pwd' type='password' placeholder='·password·' class='w3-input w3-block w3-left-align ·size·'>\n    <button id='·id·LogIn' class='w3-button w3-block w3-left-align ·size·' onclick='Konekti.module[\"·id·\"].run(\"login\")'><i class='fa fa-user-circle-o'></i> ·Log In·</button>\n    <input id='·id·Email' placeholder='·email·' class='w3-input w3-block w3-left-align ·size·'>\n    <button id='·id·Recover' class='w3-button w3-block w3-left-align ·size·' onclick='Konekti.module[\"·id·\"].run(\"recover\")'><i class='fa fa-key'></i> ·Recover·</button>\n    <input id='·id·Nickname' placeholder='·nickname·' class='w3-input w3-block w3-left-align ·size·'>\n    <button id='·id·Register' class='w3-button w3-block w3-left-align ·size·' onclick='Konekti.module[\"·id·\"].run(\"register\")'><i class='fa fa-user-plus'></i> ·Register·</button>\n    <div id='·id·Msg' class='w3-block'></div>\n</div>","js":"class KonektiUserModule extends KonektiModule{\n    constructor(dictionary){\n        super( dictionary ) \n        this.addListener(Konekti.client[dictionary.client])\n    }\n    \n    get(){\n        var nick = this.vc('Nickname')\n        if( nick != null ) nick = nick.value\n        else nick = ''\n    \treturn {'id':this.vc('Id').value,\n    \t        'password':this.vc('Pwd').value,\n    \t        'email':this.vc('Email').value,\n    \t        'nickname':nick}\n    }\n    \n    run( oper ){\n        var module = this\n        var id = this.id\n    \tvar c = this.dictionary.endpoint\n    \tvar user = this.get(id)\n    \tif( oper=='login' && (user.id.length==0 || user.password.length==0) ){\n    \t    this.vc('Msg').innerHTML = c.login\n    \t    return\n    \t}\n    \tif( oper=='register' && (user.id.length==0 || user.password.length==0 || user.email.length==0) ){\n    \t    this.vc('Msg').innerHTML = c.login\n    \t    return\n    \t}\n    \tif( oper=='recover' && (user.id.length==0 || user.email.length==0) ){\n    \t    this.vc('Msg').innerHTML = c.recover\n    \t    return\n    \t}\n    \n    \tvar header = {'user':JSON.stringify(user), 'oper':oper}\n    \tvar endpoint = new KonektiEndPoint(c.url,header)\n    \tendpoint.callback = function( xhttp ){\n            var code = xhttp.getResponseHeader('code')\n        \tif( code=='valid' ){\n                var user = JSON.parse(xhttp.getResponseHeader('user'))\n        \t    var obj = Konekti.util.downloadURL(xhttp.response)\n        \t    for( var i=0; i<module.listener.length; i++){\n            \t\tmodule.listener[i].setUser(user, obj)\n        \t    }\n        \t\tmodule.vc('Msg').innerHTML = ''\n        \t}else module.vc('Msg').innerHTML = c[code]\n        }\n    \tendpoint.request()\n    }    \n}\n\nKonekti.plugin.user.htmlCode = function( dictionary ){\n    var template = this.htmlTemplate\n    if(typeof dictionary.withRegister !== 'boolean' || !dictionary.withRegister){\n       var idx1 = template.indexOf(\"<input id='·id·Nickname'\")\n       var idx2 = template.indexOf(\"<div id='·id·Msg'\")\n       template = template.substring(0, idx1) + template.substring(idx2)\n    }\n    return Konekti.util.fromTemplate( template, dictionary, '·' )\n    \n}\n\nKonekti.plugin.user.connect = function( dictionary ){\n    Konekti.module[dictionary.id] = new KonektiUserModule(dictionary) \n}","copyright":"Copyright (c) 2019 by Jonatan Gomez-Perdomo. All rights reserved. See <A HREF='https://github.com/jgomezpe/konekti'>License</A>.","uses":["navbar","editor"]}