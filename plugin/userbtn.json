{	"copyright":"Copyright (c) 2019 by Jonatan Gomez-Perdomo. All rights reserved. See <A HREF='https://github.com/jgomezpe/konekti'>License</A>.",
	"uses":["user"],
"html":"<div id='·id·' class='w3-dropdown-hover'>\n <button id='·id·Btn' class='w3-button w3-left-align w3-xlarge' ><i class='fa fa-user'></i></button>\n <div id='·id·Content' class='w3-dropdown-content w3-border'></div>\n</div>","js":"class KonektiUserBtnModule extends KonektiModule{\n    constructor(dictionary){\n        super( dictionary ) \n        dictionary.content.client = dictionary.id\n        Konekti.client[dictionary.id] = this\n    }\n    \n    setUser( user, avatar ){\n                Konekti.client[this.dictionary.client].setUser(user,avatar)\n        this.toogle()\n    }\n\n    toogle(){\n        var module = this\n\t    var node = this.vc('Content')\n\t    if (node.style.display === \"none\"){\n    \t\tnode.style.display = \"\"\n    \t\tnode = this.vc('Btn')\n    \t\tnode.innerHTML = '<i class=\"fa fa-user\"></i>'\n    \t\tnode.onclick=null\n    \t}else{\n    \t\tnode.style.display = \"none\";\n    \t\tnode = this.vc('Btn')\n    \t\tnode.innerHTML = '<i class=\"fa fa-power-off\"></i>'\n    \t\tnode.onclick= function(){ \n    \t        var endpoint = new KonektiEndPoint(module.dictionary.content.endpoint.url, {'oper':'logout'})\n    \t        endpoint.callback = function( xhttp ){\n                    var code = xhttp.getResponseHeader('code')\n                    if(code=='valid'){\n                        module.toogle() \n                        Konekti.client[module.dictionary.client].logout()\n                    }\n                }\n    \t        endpoint.request()\n    \t\t}     \n    \t}\n    }\n}\n\nKonekti.plugin.userbtn.replace='strict' \nKonekti.plugin.userbtn.connect = function( dictionary ){\n    Konekti.module[dictionary.id] = new KonektiUserBtnModule(dictionary)\n    dictionary.content.id = dictionary.id + 'Content'\n    \n    Konekti.plugin.user.replaceWith(dictionary.content)\n    \n    if(typeof dictionary.toogle==='boolean' && dictionary.toogle) \n        Konekti.module[dictionary.id].toogle()\n/*\n\tvar node = Konekti.util.vc(id)\n\tif( dictionary.captcha != null ) window.plugin.captcha.appendAsChild( id+'BtnContent',  dictionary.captcha )\n*/\t\n}"}
