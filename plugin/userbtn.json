{"html":"<div id='·id·' class='w3-dropdown-click'>\n <button id='·id·Btn' title='·tooltip·' onclick='Konekti.client[\"·id·\"].toogle()' class='w3-button w3-left-align w3-·font·' ><i class='fa fa-user'></i></button>\n <div id='·id·Content' class='w3-dropdown-content w3-border' style='·style·'></div>\n</div>","js":"class KonektiUserBtnModule extends KonektiClient{\n    constructor(dictionary){\n        super( dictionary.id ) \n        this.dictionary = dictionary\n        dictionary.font = dictionary.font || 'xlarge'\n        dictionary.himage = Math.floor(1.5*Konekti.util.fontSize(dictionary.font))\n        dictionary.content.client = dictionary.id\n    }\n    \n    logout(){\n        this.toogle()\n\t\tvar node = this.vc('Btn')\n\t\tnode.innerHTML = '<i class=\"fa fa-user\"></i>'\n\t\tnode.onclick=null\n        Konekti.client[this.dictionary.client].logout()\n    }\n    \n    setUser( user ){\n        var module = this\n        this.toogle()\n\t\tvar node = this.vc('Btn')\n\t\tif( typeof user.avatar !== 'undefined' && user.avatar != null ){\n\t\t    console.log('UserBtn...'+this.dictionary.himage)\n\t\t    node.innerHTML = '<img src=\"' + user.avatar + '\" style=\"height:'+this.dictionary.himage+'px\">'\n\t\t}else\n\t\t    node.innerHTML = '<i class=\"fa fa-power-off\"></i>'\n\t\tnode.onclick= function(){ \n\t        var endpoint = new AplikigoEndPoint(module.dictionary.content.endpoint.url)\n\t        endpoint.request(module.id+'Content', 'logout', [user.credential])\n\t\t}     \n        Konekti.client[this.dictionary.client].setUser(user)\n    }\n\n    toogle(){\n        var module = this\n        var node = this.vc('Content')\n        if (node.className.indexOf(\"w3-show\") == -1){\n    \t\tnode.className += \" w3-show\"\n    \t}else{\n    \t\tnode.className = node.className.replace(\" w3-show\", \"\")\n    \t}\n    }\n}\n\nKonekti.plugin.userbtn.replace='strict' \nKonekti.plugin.userbtn.connect = function( dictionary ){\n    new KonektiUserBtnModule(dictionary)\n    dictionary.content.id = dictionary.id + 'Content'\n    dictionary.content.font = Konekti.util.previousFont(dictionary.font)\n    Konekti.plugin.user.replaceWith(dictionary.content)\n    \n    if(typeof dictionary.toogle==='boolean' && dictionary.toogle) \n        Konekti.client[dictionary.id].toogle()\n/*\n\tvar node = Konekti.util.vc(id)\n\tif( dictionary.captcha != null ) window.plugin.captcha.appendAsChild( id+'BtnContent',  dictionary.captcha )\n*/\t\n}","copyright":"Copyright (c) 2019 by Jonatan Gomez-Perdomo. All rights reserved. See <A HREF='https://github.com/jgomezpe/konekti'>License</A>.","uses":["user"]}
