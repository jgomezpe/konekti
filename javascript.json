{	"copyright":"Copyright (c) 2019 by Jonatan Gomez-Perdomo. All rights reserved. See <A HREF='https://github.com/jgomezpe/konekti'>License</A>.",
	"uses":["navbar","editor","iframe"],
"html":"<div id='·id·' class='w3-rest'>\n    <div id='·id·JSnavbar' class='w3-bar'></div>\n    <div id='·id·JSeditor' ></div>\n    <div id='·id·JSerror' style='position:relative; padding-bottom:54%; height:0; width:99%; overflow:scroll; white-space: pre-wrap; display:none' class='w3-container w3-text-red'></div>\n    <div id='·id·JSconsole' style='display:none' ></div>\n</div>","js":"class JSClient{\n\tconstructor( id, client ){\n\t    this.client = client\n\t\tthis.id = id\n\t\tthis.edit={}\n\t\tthis.annot = []\n\t}\n\n\teditor(id, get, set, scrollTop){\n\t\tif( this.edit[id] == null ) this.edit[id] = {}\n\t\tthis.edit[id].getText = get\n\t\tthis.edit[id].setText = set\n\t\tif(id==this.id+'JSeditor' && typeof this.client != 'undefined'){\n    \t    Konekti.server.client[this.client].editor(this.id, get, set, scrollTop )\n    \t    Konekti.server.client[this.client].editor(id, get, set, scrollTop )\n\t\t}    \n\t}\n\n\tannotation(id, annot){\n\t        this.annot = []\n            for (var i=0; i<annot.length; i++) {\n                if( annot[i].type == 'error' ) this.annot.push(annot[i])\n            }\n\n\t}\n\n\trun(){\n\t\tvar id = this.id\n\t\tvar error = id+'JSerror'\n\t\tvar editor = id+'JSeditor'\n\t\tvar console = id+'JSconsole'\n\t\tvar cerror = Konekti.util.vc(error)\n\t\tvar cconsole = Konekti.util.vc(console)\n\t    if( this.annot == null ){\n\t        cconsole.style.display = 'block' \n\t        cerror.style.display = 'none' \n    \t\tvar code = this.edit[editor].getText()\n    \t\tvar jsconsole = id+'JSconsole'\n    \t\tthis.edit[jsconsole].setText(\"<!DOCTYPE html>\\n\"+\n    \t\t\t\"<html>\\n<head>\\n\"+\n    \t\t\t\"\t<meta charset='UTF-8'>\\n\"+\n    \t\t\t\"\t<meta name='viewport' content='width=device-width, initial-scale=1'>\\n\"+\n    \t\t\t\"\t<link rel='stylesheet' href='https://www.w3schools.com/w3css/4/w3.css'>\\n</head>\\n\"+\n    \t\t\t\"<body>\\n\"+\n    \t\t\t\"\t<div id='error' class='w3-container w3-text-red'></div>\\n\"+\n    \t\t\t\"\t<div id='out' style='position:relative; padding-bottom:54%; height:0; width:99%; overflow:scroll; white-space: pre-wrap;' class='w3-container'>Output:</div>\"+\n    \t\t\t\"\t<script>\\n\"+\n    \t\t\t\"\t\tconsole.log = function(txt){document.getElementById('out').innerHTML = document.getElementById('out').innerHTML+'\\\\n'+txt}\\n\"+\n    \t\t\t\"\t\ttry {\\n\"+ \n    \t\t\t\"\t\t\"+code+\"\\n\"+\n    \t\t\t\"\t\t} catch(e){\\n\"+\n    \t\t\t\"\t\t\tdocument.getElementById('error').innerHTML = e.message\\n\"+\n    \t\t\t\"\t\t}\\n\"+\n    \t\t\t\"\t</\"+\"script>\\n\"+\n    \t\t\t\"</body>\\n\"+\n    \t\t\t\"</html>\"\n    \t\t)\n    \t}else{\n\t        cconsole.style.display = 'none' \n\t        cerror.style.display = 'block' \n    \t\tvar s = ''\n    \t\tvar annot = this.annot\n    \t    for( var i=0; i<annot.length; i++ ){\n                s += '' + annot[i].type + ':' + annot[i].text + \" on line \" + (annot[i].row+1) + \" column \" + (annot[i].column+1) + '\\n'\n    \t    }\n    \t    cerror.innerHTML = s\n    \t}\n\t}\n}\n\n\nKonekti.plugin.javascript.connect = function( dictionary ){\n    var mainclient = dictionary.client\n    \n\tvar id = dictionary.id\n\tvar client = id\n\tdictionary.client = client\n\n    var theClient = new JSClient(client, mainclient)\n\tKonekti.server.client[client] = theClient\n\n\tvar nav = dictionary.navbarid\n\n\tKonekti.plugin.navbar.replaceWith(\n\t\t{\n\t\t\t\"id\":nav,\n\t\t\t\"client\":client,\n\t\t\t\"color\":\"w3-blue-grey\",\n\t\t\t\"search\":false,\n\t\t\t\"btn\":[\t{\"id\":\"run\",\"fa\":\"fa fa-play\"} ]\n\t\t}\n\t)\n\n\tvar editor = id+'JSeditor'\n\tKonekti.plugin.editor.replaceWith(\n\t\t{ \n\t\t\t\"id\":editor,\n\t\t\t\"client\":client,\n\t\t\t\"theme\":\"chrome\", \n\t\t\t\"initial\":dictionary.initial, \n\t\t\t\"mode\":\"javascript\"\n\t\t}\n\t)\n\n\tvar jsconsole = id+'JSconsole'\n\tKonekti.plugin.iframe.replaceWith(\n\t\t{ \n\t\t\t\"id\":jsconsole,\n\t\t\t\"client\":client,\n\t\t\t\"src\":\"\"\n\t\t}\n\t)\n}\n"}
